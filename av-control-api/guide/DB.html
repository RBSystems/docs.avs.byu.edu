<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Complete Database Guide :: BYU OIT AV // Docs</title>
    <link rel="canonical" href="https://docs.avs.byu.edu/av-control-api/guide/DB.html">
    <meta name="generator" content="Antora 2.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/site-extra.css">
<link rel="stylesheet" href="../../_/css/vendor/docsearch.min.css">
<!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://it.byu.edu">BYU OIT AV</a>
        <span class="separator">//</span>
        <a href="https://docs.avs.byu.edu">Docs</a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Projects</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>AV Control API</strong></div>
            <a class="navbar-item" href="https://github.com/byuoitav/av-control-api">Repository</a>
            <a class="navbar-item" href="https://github.com/byuoitav/av-control-api/issues">Issue Tracker</a>
            <hr class="navbar-divider">
            <a class="navbar-item" href="https://gitlab.com/antora/antora/blob/master/contributing.adoc">Contributing</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Tools</div>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://smee.avs.byu.edu">BYU Monitoring</a>
          </div>
        </div>
        <a class="navbar-item" href="https://github.com/byuoitav">
          <span class="icon">
            <a title="GitHub [MIT (http://opensource.org/licenses/mit-license.php)]" href="https://github.com/byuoitav"><img width="256" alt="Octicons-mark-github" src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/512px-Octicons-mark-github.svg.png"></a>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="av-control-api" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">AV Control API</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../whats-new.html">What&#8217;s New</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="guide.html">Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart.html">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="OS.html">Complete OS Setup Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="startAPI.html">Starting the AV API</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="DB.html">Complete Database Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="API.html">Complete API Testing Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="FAQ.html">Frequently Asked Questions</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../drivers/drivers.html">Drivers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../drivers/drivers.html#_writing_a_driver">Writing a Driver</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../drivers/drivers.html#_creating_a_driver_server">Creating a Driver Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AV Control API</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">AV Control API</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lazarette</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lazarette/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">AV Control API</a></li>
    <li><a href="guide.html">Guide</a></li>
    <li><a href="DB.html">Complete Database Guide</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/byuoitav/av-control-api/edit/master/docs/modules/guide/pages/DB.adoc">Edit this Page</a></div>
  </div>
<article class="doc">
<h1 class="page">Complete Database Guide</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Once you have the couch-db container running, you should be able to access your Couch Database by going to <code>http://[pi-ip-addr]:5984/_utils</code> in a web browser, using the ip address of your pi.</p>
</div>
<div class="paragraph">
<p>We use CouchDB as the database for our solution. Apache CouchDB is an open-source document-oriented NoSQL database
that uses JSON documents to store data. For more information about CuchDB specifically please refer to their <a href="http://docs.couchdb.org/en/stable/intro/index.html">documentation</a>.</p>
</div>
<div class="paragraph">
<p>Within CouchDB there are five important tables that are used throughout our solution:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#_devices">devices</a></p>
</li>
<li>
<p><a href="#_device_type">device_type</a></p>
</li>
<li>
<p><a href="#_rooms">rooms</a></p>
</li>
<li>
<p><a href="#_buildings">buildings</a></p>
</li>
<li>
<p><a href="#_room_configurations">room_configurations</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This guide will outline each of the tables above, their purpose, what data is being stored, and how it is used within our AV solution.</p>
</div>
<div class="paragraph">
<p><strong><em>Please note that the documents below are meant to explain each of the tables and a illustrate what data is stored in each of the documents. These examples are not the meant to be copied and pasted for the demo.</em></strong></p>
</div>
<div class="paragraph">
<p>The exact documents that you need for terms of this demo can be found <a href="DemoDB.html" class="page">here</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_devices"><a class="anchor" href="#_devices"></a>devices</h3>
<div class="paragraph">
<p>The devices table contains all of the necessary information for the device you are using, this includes the device name, device type,
IP address of the device, and the roles or capabilities the device has. These fields will be described in greater detail down below.</p>
</div>
<div class="paragraph">
<p>Sample CouchDB Entry for Raspberry Pi device:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "_id": "BLDG-RM-CP1", <i class="conum" data-value="1"></i><b>(1)</b>
  "_rev": "1-1d3b5f66d895b3bb1e9c7e5671488ea1", <i class="conum" data-value="2"></i><b>(2)</b>
  "name": "CP1", <i class="conum" data-value="3"></i><b>(3)</b>
  "address": "BLDG-RM-CP1.youruniversity.edu", <i class="conum" data-value="4"></i><b>(4)</b>
  "description": "BLDG-RM", <i class="conum" data-value="5"></i><b>(5)</b>
  "display_name": "BLDG-RM", <i class="conum" data-value="6"></i><b>(6)</b>
  "type": { <i class="conum" data-value="7"></i><b>(7)</b>
    "_id": "Pi3"
  },
  "roles": [ <i class="conum" data-value="8"></i><b>(8)</b>
    {
      "_id": "ControlProcessor",
      "description": "ControlProcessor"
    },
    {
      "_id": "EventRouter",
      "description": "EventRouter"
    },
    {
      "_id": "Touchpanel",
      "description": "Touchpanel"
    }
  ],
  "ports": [] <i class="conum" data-value="9"></i><b>(9)</b>
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>"_id"</code>: Unique identifier of JSON Document in CouchDB. An ID is automatically generated when making a new document but can be changed to something
more readable like "BLDG-RM-CP1" (CP - Control Processor) or any ID of your choice.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>"_rev"</code>: Revision token that is automatically generated by CouchDB. Do not worry about changing this, Couch simply uses this token
for optimistic-concurrency detection. For more information about this field refer to CouchDB&#8217;s <a href="http://guide.couchdb.org/draft/consistency.html#locking">documentation</a></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>"name"</code>: Name of the device.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>"address"</code>: This is the IP address of the device. if you have DNS resolution set up in your organization you can assign a name to the IP address
abnd use the name as shown in the above example, or you can simply put in the IP address (i.e. 10.254.254.254).</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>"description"</code>: Description of the device, this field is for your benefit to include any descriptive information you want stored.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>"display_name"</code>: The name that you want displayed for the device.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><code>"type"</code>: Type refers to the device type. The "_id" maps back to a document in the device_type database. This will be explained in greater
detail in the device_type section.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><code>"roles"</code>: A list of roles that the device has. A complete list of roles and how they relate to each device can be found <a href="roles.html" class="page">here</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td><code>"ports"</code>: A list of the ports on the device. A Pi does not have any ports so the array is empty. This will make more sense in the next device example.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sample CouchDB Entry for Sony XBR device:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "_id": "HBLL-2231-D2", <i class="conum" data-value="1"></i><b>(1)</b>
  "_rev": "1-de858339580870273735386f7a4a218e", <i class="conum" data-value="1"></i><b>(1)</b>
  "name": "D2", <i class="conum" data-value="1"></i><b>(1)</b>
  "address": "10.66.21.56", <i class="conum" data-value="1"></i><b>(1)</b>
  "description": "Display 2", <i class="conum" data-value="1"></i><b>(1)</b>
  "display_name": "Display 2",<i class="conum" data-value="1"></i><b>(1)</b>
  "type": { <i class="conum" data-value="1"></i><b>(1)</b>
    "_id": "SonyXBR"
  },
  "roles": [ <i class="conum" data-value="1"></i><b>(1)</b>
    {
      "_id": "AudioOut",
      "description": "AudioOut"
    },
    {
      "_id": "VideoOut",
      "description": "VideoOut"
    }
  ],
  "ports": [ <i class="conum" data-value="2"></i><b>(2)</b>
    {
      "_id": "hdmi!2", <i class="conum" data-value="3"></i><b>(3)</b>
      "friendly_name": "SonyTv HDMI input 2", <i class="conum" data-value="4"></i><b>(4)</b>
      "source_device": "HBLL-2231-SW1", <i class="conum" data-value="5"></i><b>(5)</b>
      "destination_device": "HBLL-2231-D2", <i class="conum" data-value="6"></i><b>(6)</b>
      "description": "SonyTv HDMI input 2" <i class="conum" data-value="7"></i><b>(7)</b>
    }
  ]
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>All of these fields have been explained in the above example</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>"ports"</code>: A list of the ports on the device. Each input for the Sony Display that is used will be listed in this array.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>"_id"</code>: ID of the port, "hdmi!2" is the format used in communicating with the Sony XBR display.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>"friendly_name"</code>: What you want the input to be named on the UI</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>"source_device"</code>: The source device of the input coming into the TV (i.e. vieo switcher, computer, HDMI Pass through etc.).
This is the ID of the document for the source device.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>"destination_device"</code>: The destination device of the incoming input. The source and destination device combined indicate the directionality of the video input.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><code>"description"</code>: A description of the port, this field is for your benefit to include any descriptive information you want stored.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_device_type"><a class="anchor" href="#_device_type"></a>device_type</h3>
<div class="paragraph">
<p>The device_type database contains information about a type of devices (whereas the devices database contains info about a specific instance of a device).
This Database is important because it contains info on what commands are available for the device, and what mcroservices and endpoints are used
in the use of these commands.</p>
</div>
<div class="paragraph">
<p>Sample CouchDB Entry for Raspberry Pi device-type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "_id": "Pi3", <i class="conum" data-value="1"></i><b>(1)</b>
  "_rev": "9-9a60c267a9cad92da3fb85p35cbb757d", <i class="conum" data-value="1"></i><b>(1)</b>
  "description": "A Raspberry Pi 3", <i class="conum" data-value="1"></i><b>(1)</b>
  "display_name": "Pi", <i class="conum" data-value="1"></i><b>(1)</b>
  "roles": [ <i class="conum" data-value="2"></i><b>(2)</b>
    {
      "_id": "ControlProcessor",
      "description": "Acts as a device to control the AV-API in a room"
    },
    {
      "_id": "Touchpanel",
      "description": "A device with a touchscreen interface"
    },
    {
      "_id": "EventRouter",
      "description": "Acts as a device that routes events through the room to other devices"
    }
  ],
  "commands": [ <i class="conum" data-value="3"></i><b>(3)</b>
    {
      "_id": "GenericPassthroughADCP", <i class="conum" data-value="4"></i><b>(4)</b>
      "description": "GenericPassthroughADCP", <i class="conum" data-value="5"></i><b>(5)</b>
      "microservice": { <i class="conum" data-value="6"></i><b>(6)</b>
        "_id": "generic-gateway-Adcp", <i class="conum" data-value="7"></i><b>(7)</b>
        "description": "used to serialize requests to and ADCP device", <i class="conum" data-value="8"></i><b>(8)</b>
        "address": "http://:gateway:8012" <i class="conum" data-value="9"></i><b>(9)</b>
      },
      "endpoint": { <i class="conum" data-value="10"></i><b>(10)</b>
        "_id": "Generic Gateway", <i class="conum" data-value="11"></i><b>(11)</b>
        "description": "A generic Gateway for use in base case where microservice exists outside of the pi issuing the requests.", <i class="conum" data-value="12"></i><b>(12)</b>
        "path": "/:path" <i class="conum" data-value="13"></i><b>(13)</b>
      },
      "priority": 1 <i class="conum" data-value="14"></i><b>(14)</b>
    }
  ]
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>These fields are identical to the fields mentioned in detail in previous examples.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>"roles"</code>: The roles of the device, described in detail in previous examples.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>"commands"</code>: The list of commands that can be sent to this device.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>"_id"</code>: the unique identifier for the command.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>"description"</code>: for your own use to save info about the command.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>"microservice"</code>: The info for the microservice used in making the command.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><code>"_id"</code>: the unique identifier for the microservice.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><code>"description"</code>: for your own use to save info about the microservice.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td><code>"address"</code>: is where the microservice is running including the port it is running on.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td><code>"endpoint"</code>: The API endpoint on the microservice that corresponds to the command.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td><code>"_id"</code>: is the unique identifier for the enpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td><code>"description"</code>: for your own use to save info about the endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td><code>"path"</code>: is the path to the endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td><code>"priority"</code>: This is used to help determine which events are more important and need to be executed first.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sample CouchDB Entry for SONY XBR device-type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "_id": "SonyXBR", <i class="conum" data-value="1"></i><b>(1)</b>
  "_rev": "15-8f26e6d80867548a39675c73619663bc", <i class="conum" data-value="1"></i><b>(1)</b>
  "description": "The Sony XBR TV line.", <i class="conum" data-value="1"></i><b>(1)</b>
  "display_name": "Sony XBR TV", <i class="conum" data-value="1"></i><b>(1)</b>
  "output": true, <i class="conum" data-value="2"></i><b>(2)</b>
  "destination": true, <i class="conum" data-value="3"></i><b>(3)</b>
  "default-name": "D", <i class="conum" data-value="1"></i><b>(1)</b>
  "default-icon": "tv", <i class="conum" data-value="1"></i><b>(1)</b>
  "roles": [ <i class="conum" data-value="1"></i><b>(1)</b>
    {
      "_id": "AudioOut",
      "description": "Acts as an audio output device"
    },
    {
      "_id": "VideoOut",
      "description": "Acts as a video output device"
    }
  ],
  "power_states": [ <i class="conum" data-value="4"></i><b>(4)</b>
    {
      "_id": "On",
      "description": "On",
      "tags": []
    },
    {
      "_id": "Standby",
      "description": "Standby",
      "tags": []
    }
  ],
  "ports": [ <i class="conum" data-value="1"></i><b>(1)</b>
    {
      "_id": "hdmi!1",
      "friendly_name": "HDMI 1",
      "description": "SonyTV HDMI input 1",
      "tags": [
        "port-in",
        "video"
      ]
    },
    ...//there are additional ports not included
  ],
  "commands": [ <i class="conum" data-value="1"></i><b>(1)</b>
    {
      "_id": "Standby",
      "description": "Standby",
      "microservice": {
        "_id": "sony-control-microservice",
        "description": "",
        "address": "http://localhost:8007"
      },
      "endpoint": {
        "_id": "Standby",
        "description": "Standard standby endpoint.",
        "path": "/:address/power/standby"
      },
      "priority": 100
    }
    ...//there are additional commands not included
  ]
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>These fields are identical to the fields mentioned in detail in previous examples. The ones above are an example of the
implementation of these fields for a SonyXBR</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>"output"</code>: This field designates if the device is an output device.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>"destination"</code>: This field designates if the device is a destination device.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>"power_states"</code>: This field lists the different power states of the device.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_rooms"><a class="anchor" href="#_rooms"></a>rooms</h3>
<div class="paragraph">
<p>Here is the description for rooms database
Sample CouchDB Entry for rooms database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "_id": "BNSN-W002", <i class="conum" data-value="1"></i><b>(1)</b>
  "_rev": "2-6eb403483e991c2a73280ed45e008cfd", <i class="conum" data-value="1"></i><b>(1)</b>
  "name": "BNSN-W002", <i class="conum" data-value="1"></i><b>(1)</b>
  "description": "BNSN W002", <i class="conum" data-value="1"></i><b>(1)</b>
  "configuration": { <i class="conum" data-value="2"></i><b>(2)</b>
    "_id": "Default"
  },
  "designation": "stage", <i class="conum" data-value="3"></i><b>(3)</b>
  "attributes": { <i class="conum" data-value="4"></i><b>(4)</b>
    "Ceiling Box": true
  }
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>These fields are identical to the fields mentioned in detail in previous examples.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>"configuration"</code>: This is the configuration of the room. It maps to an entry in the room_configurations database.
The purpose of this field will be discussed later along with the room_configurations database.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>"designation"</code>: This field designates if the room is in development, stage, or production.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>"attributes"</code>: This field is for any other room attributes you would like to document.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_buildings"><a class="anchor" href="#_buildings"></a>buildings</h3>
<div class="paragraph">
<p>The buildings database simply contains a basic entry for each of the buildings on campus. It contains very simple information about it as well.
Sample CouchDB Entry for buildings database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "_id": "BLDG", <i class="conum" data-value="1"></i><b>(1)</b>
  "_rev": "1-20e466ecb7cca0cc7ec21f3badf9e2ce",
  "name": "Building Name",
  "description": "Description of the building on your campus."
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The fields in this database entry are self-explanatory.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_room_configurations"><a class="anchor" href="#_room_configurations"></a>room_configurations</h3>
<div class="paragraph">
<p>Each room may have the same or different system architectures. The room_configurations database contains data on various system architectures.
The room configuration refers to a block of code and determines what actions are being sent. These actions are http requests that are
made to specific microservices.The data below is then used for these actions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "_id": "Default", <i class="conum" data-value="1"></i><b>(1)</b>
  "_rev": "2-d2e604ba3d31eba5636da22beccedcfe", <i class="conum" data-value="1"></i><b>(1)</b>
  "evaluators": [ <i class="conum" data-value="2"></i><b>(2)</b>
    {
      "_id": "PowerOnDefault", <i class="conum" data-value="3"></i><b>(3)</b>
      "codekey": "PowerOnDefault", <i class="conum" data-value="4"></i><b>(4)</b>
      "description": "PowerOnDefault", <i class="conum" data-value="5"></i><b>(5)</b>
      "priority": 1 <i class="conum" data-value="6"></i><b>(6)</b>
    },
    {
      "_id": "StandbyDefault",
      "codekey": "StandbyDefault",
      "description": "StandbyDefault",
      "priority": 9999
    },
    {
      "_id": "ChangeAudioInputDefault",
      "codekey": "ChangeAudioInputDefault",
      "description": "ChangeAudioInputDefault",
      "priority": 1337
    },
    {
      "_id": "MuteDefault",
      "codekey": "MuteDefault",
      "description": "MuteDefault",
      "priority": 5
    },
    ... //there are other evaluators not included in this sample
  ],
  "description": "Default" <i class="conum" data-value="1"></i><b>(1)</b>
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>These fields are identical to the fields mentioned in detail in previous examples.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>"evaluators"</code>: This is where you are going to hit the API endpoints. We currently run docker containers on the rapsberry pi so it is localhost.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>"_id"</code>: Id of the evaluator</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>"codekey"</code>: The codekey is a key in a map of commands that is used to determine what command needs to be sent for the room/device.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>"description"</code>: Description of the evaluator.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>"priority"</code>: This designates the order in which the actions are executed. (i.e. if a power on action and a change input action are both
executed you want the power on action to have a lower number in the priority field than the change input - designating that the power on action
will execute before the change input action will execute.)</td>
</tr>
</table>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>Copyright (C) 2019-2020 <a href="https://byu.edu">Brigham Young University</a>.</p>
  <p>Except where otherwise noted, docs.avs.byu.edu are licensed under the <a href="https://www.mozilla.org/en-US/MPL/2.0/">Apache Version 2.0</a></p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
